// FFmpeg Recording Preset CFG by Purple-CSGO

// make sure there's no frame drop when csgo is not selected/focused
engine_no_focus_sleep 0

// Command: Clear all presets
mirv_exec alias allclear "tga;mirv_streams settings remove tga;mirv_streams settings remove p0;mirv_streams settings remove p0a;mirv_streams settings remove p1;mirv_streams settings remove c0;mirv_streams settings remove c0p;mirv_streams settings remove c1;mirv_streams settings remove c1p;clear2;clear3";
mirv_exec alias clear2 "mirv_streams settings remove c2;mirv_streams settings remove c2p;mirv_streams settings remove he0;mirv_streams settings remove he0p;mirv_streams settings remove he1;mirv_streams settings remove he1p;mirv_streams settings remove he2;mirv_streams settings remove he2p;mirv_streams settings remove n0;mirv_streams settings remove n0p";
mirv_exec alias clear3 "mirv_streams settings remove n1;mirv_streams settings remove n1p;mirv_streams settings remove n2;mirv_streams settings remove n2p;mirv_streams settings remove a0;mirv_streams settings remove a1;mirv_streams settings remove a2;mirv_streams settings remove i0;mirv_streams settings remove i1;mirv_streams settings remove i2";

// ProRes
mirv_streams settings add ffmpeg p0  "-c:v prores  -profile:v 4 {QUOTE}{AFX_STREAM_PATH}.mov{QUOTE}"
mirv_streams settings add ffmpeg p0a "-c:v prores  -profile:v 4 -alpha_bits 8 {QUOTE}{AFX_STREAM_PATH}.mov{QUOTE}"
mirv_streams settings add ffmpeg p1  "-c:v prores  -profile:v 2 -pix_fmt yuv422p10le {QUOTE}{AFX_STREAM_PATH}.mov{QUOTE}"

// CPU
mirv_streams settings add ffmpeg c0  "-c:v libx264 -preset 0 -qp  0  -g 300 -keyint_min 1 -pix_fmt yuv422p10le {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg c0p "-c:v libx264 -preset 0 -qp  0  -g 300 -keyint_min 1 -pix_fmt yuv444p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg c1  "-c:v libx264 -preset 1 -crf 4  -qmax 20 -g 300 -keyint_min 1 -pix_fmt yuv420p -x264-params ref=3:me=hex:subme=3:merange=12:b-adapt=1:aq-mode=2:aq-strength=0.9:no-fast-pskip=1 {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg c1p "-c:v libx264 -preset 1 -crf 4  -qmax 20 -g 300 -keyint_min 1 -pix_fmt yuv444p -x264-params ref=3:me=hex:subme=3:merange=12:b-adapt=1:aq-mode=2:aq-strength=0.9:no-fast-pskip=1 {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg c2  "-c:v libx264 -preset 1 -crf 12 -qmax 26 -g 300 -keyint_min 1 -pix_fmt yuv420p -x264-params ref=3:me=hex:subme=3:merange=12:b-adapt=1:aq-mode=2:aq-strength=0.9:no-fast-pskip=1 {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg c2p "-c:v libx264 -preset 1 -crf 12 -qmax 26 -g 300 -keyint_min 1 -pix_fmt yuv444p -x264-params ref=3:me=hex:subme=3:merange=12:b-adapt=1:aq-mode=2:aq-strength=0.9:no-fast-pskip=1 {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"

mirv_streams settings add ffmpeg he0  "-c:v libx265 -x265-params no-sao=1 -preset 0 -lossless -g 300 -keyint_min 1 -pix_fmt yuv422p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg he0p "-c:v libx265 -x265-params no-sao=1 -preset 0 -lossless -g 300 -keyint_min 1 -pix_fmt yuv444p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg he1  "-c:v libx265 -x265-params no-sao=1 -preset 1 -crf 8  -qmax 20 -g 300 -keyint_min 1 -pix_fmt yuv422p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg he1p "-c:v libx265 -x265-params no-sao=1 -preset 1 -crf 8  -qmax 20 -g 300 -keyint_min 1 -pix_fmt yuv444p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg he2  "-c:v libx265 -x265-params no-sao=1 -preset 1 -crf 16 -qmax 28 -g 300 -keyint_min 1 -pix_fmt yuv422p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg he2p "-c:v libx265 -x265-params no-sao=1 -preset 1 -crf 16 -qmax 28 -g 300 -keyint_min 1 -pix_fmt yuv444p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"

// Nvidia
mirv_streams settings add ffmpeg n0  "-c:v hevc_nvenc -g 300 -tune lossless -pix_fmt yuv420p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg n0p "-c:v hevc_nvenc -g 300 -tune lossless -pix_fmt yuv444p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg n1  "-c:v hevc_nvenc -g 300 -preset medium -tune hq -rc constqp -qp 14 -pix_fmt yuv420p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg n1p "-c:v hevc_nvenc -g 300 -preset medium -tune hq -rc constqp -qp 14 -pix_fmt yuv444p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg n2  "-c:v hevc_nvenc -g 300 -preset medium -tune hq -rc constqp -qp 20 -pix_fmt yuv420p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg n2p "-c:v hevc_nvenc -g 300 -preset medium -tune hq -rc constqp -qp 20 -pix_fmt yuv444p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"

// AMD
mirv_streams settings add ffmpeg a0  "-c:v hevc_amf -usage 0 -quality 0 -rc cqp -qp 0  -pix_fmt yuv420p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg a1  "-c:v hevc_amf -usage 0 -quality 0 -rc cqp -qp 12 -pix_fmt yuv420p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg a2  "-c:v hevc_amf -usage 0 -quality 0 -rc cqp -qp 20 -pix_fmt yuv420p {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"

// Intel
mirv_streams settings add ffmpeg i0  "-c:v hevc_qsv -q:v 0  -preset veryfast -g 300 -pix_fmt nv12 {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg i1  "-c:v hevc_qsv -q:v 12 -preset veryfast -g 300 -pix_fmt nv12 {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"
mirv_streams settings add ffmpeg i2  "-c:v hevc_qsv -q:v 20 -preset veryfast -g 300 -pix_fmt nv12 {QUOTE}{AFX_STREAM_PATH}.mp4{QUOTE}"

// Command Aliases
mirv_exec alias tga  "mirv_streams settings edit afxDefault settings afxClassic;echo;echo {QUOTE}Current Record Setting: afxClassic - tga sequence{QUOTE};echo;";
mirv_exec alias p0   "mirv_streams settings edit afxDefault settings p0  ;echo;echo {QUOTE}Current Record Setting: p0  {QUOTE};echo;"
mirv_exec alias p0a  "mirv_streams settings edit afxDefault settings p0a ;echo;echo {QUOTE}Current Record Setting: p0a {QUOTE};echo;"
mirv_exec alias p1   "mirv_streams settings edit afxDefault settings p1  ;echo;echo {QUOTE}Current Record Setting: p1  {QUOTE};echo;"
mirv_exec alias c0   "mirv_streams settings edit afxDefault settings c0  ;echo;echo {QUOTE}Current Record Setting: c0  {QUOTE};echo;"
mirv_exec alias c0p  "mirv_streams settings edit afxDefault settings c0p ;echo;echo {QUOTE}Current Record Setting: c0p {QUOTE};echo;"
mirv_exec alias c1   "mirv_streams settings edit afxDefault settings c1  ;echo;echo {QUOTE}Current Record Setting: c1  {QUOTE};echo;"
mirv_exec alias c1p  "mirv_streams settings edit afxDefault settings c1p ;echo;echo {QUOTE}Current Record Setting: c1p {QUOTE};echo;"
mirv_exec alias c2   "mirv_streams settings edit afxDefault settings c2  ;echo;echo {QUOTE}Current Record Setting: c2  {QUOTE};echo;"
mirv_exec alias c2p  "mirv_streams settings edit afxDefault settings c2p ;echo;echo {QUOTE}Current Record Setting: c2p {QUOTE};echo;"
mirv_exec alias he0  "mirv_streams settings edit afxDefault settings he0 ;echo;echo {QUOTE}Current Record Setting: he0 {QUOTE};echo;"
mirv_exec alias he0p "mirv_streams settings edit afxDefault settings he0p;echo;echo {QUOTE}Current Record Setting: he0p{QUOTE};echo;"
mirv_exec alias he1  "mirv_streams settings edit afxDefault settings he1 ;echo;echo {QUOTE}Current Record Setting: he1 {QUOTE};echo;"
mirv_exec alias he1p "mirv_streams settings edit afxDefault settings he1p;echo;echo {QUOTE}Current Record Setting: he1p{QUOTE};echo;"
mirv_exec alias he2  "mirv_streams settings edit afxDefault settings he2 ;echo;echo {QUOTE}Current Record Setting: he2 {QUOTE};echo;"
mirv_exec alias he2p "mirv_streams settings edit afxDefault settings he2p;echo;echo {QUOTE}Current Record Setting: he2p{QUOTE};echo;"
mirv_exec alias n0   "mirv_streams settings edit afxDefault settings n0  ;echo;echo {QUOTE}Current Record Setting: n0  {QUOTE};echo;"
mirv_exec alias n0p  "mirv_streams settings edit afxDefault settings n0p ;echo;echo {QUOTE}Current Record Setting: n0p {QUOTE};echo;"
mirv_exec alias n1   "mirv_streams settings edit afxDefault settings n1  ;echo;echo {QUOTE}Current Record Setting: n1  {QUOTE};echo;"
mirv_exec alias n1p  "mirv_streams settings edit afxDefault settings n1p ;echo;echo {QUOTE}Current Record Setting: n1p {QUOTE};echo;"
mirv_exec alias n2   "mirv_streams settings edit afxDefault settings n2  ;echo;echo {QUOTE}Current Record Setting: n2  {QUOTE};echo;"
mirv_exec alias n2p  "mirv_streams settings edit afxDefault settings n2p ;echo;echo {QUOTE}Current Record Setting: n2p {QUOTE};echo;"
mirv_exec alias a0   "mirv_streams settings edit afxDefault settings a0  ;echo;echo {QUOTE}Current Record Setting: a0  {QUOTE};echo;"
mirv_exec alias a1   "mirv_streams settings edit afxDefault settings a1  ;echo;echo {QUOTE}Current Record Setting: a1  {QUOTE};echo;"
mirv_exec alias a2   "mirv_streams settings edit afxDefault settings a2  ;echo;echo {QUOTE}Current Record Setting: a2  {QUOTE};echo;"
mirv_exec alias i0   "mirv_streams settings edit afxDefault settings i0  ;echo;echo {QUOTE}Current Record Setting: i0  {QUOTE};echo;"
mirv_exec alias i1   "mirv_streams settings edit afxDefault settings i1  ;echo;echo {QUOTE}Current Record Setting: i1  {QUOTE};echo;"
mirv_exec alias i2   "mirv_streams settings edit afxDefault settings i2  ;echo;echo {QUOTE}Current Record Setting: i2  {QUOTE};echo;"


echo "────────────┬────────────┬────────────────────"
echo "   Command  |  8bit 444  |     Preset           "
echo "────────────┼────────────┼────────────────────"
echo "    tga     |            | tga sequence"
echo "    p0      |            | ProRes 4444"
echo "    p0a     |            | ProRes 4444 8bits Alpha Channel"
echo "    p1      |            | ProRes 422"
echo "    c0      |    c0p     | x264 Lossless"
echo "    c1      |    c1p     | x264 High Quality"
echo "    c2      |    c2p     | x264 Mid Quality"
echo "    he0     |    he0p    | x265 Lossless"
echo "    he1     |    he1p    | x265 High Quality"
echo "    he2     |    he2p    | x265 Mid Quality"
echo "    n0      |    n0p     | hevc Nvidia hw Lossless"
echo "    n1      |    n1p     | hevc Nvidia hw High Quality"
echo "    n2      |    n2p     | hevc Nvidia hw Mid Quality"
echo "    a0      |            | hevc AMD    hw Lossless"
echo "    a1      |            | hevc AMD    hw High Quality"
echo "    a2      |            | hevc AMD    hw Mid Quality"
echo "    i0      |            | hevc Intel  hw Lossless"
echo "    i1      |            | hevc Intel  hw High Quality"
echo "    i2      |            | hevc Intel  hw Mid Quality"
echo "────────────┴────────────┴──────────────────────"

// Default Preset
c1;
